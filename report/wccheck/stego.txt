Least Significant Bit (LSB) steganography - specifically LSB1 - involves replacing the last bit of each byte of an image file (called the cover image) with a bit from the data to be hidden. For example, if each character in the message requires a single byte, then it can be hidden in 8 bytes of the cover image. If we instead use the two least significant bits, we can half the image size needed to mask our message, but this can result in more obvious distortion in the original image. The message being hidden doesn't necessarily have to be text either, images can be masked using other images as well.

Experiment \ref{comparingimages} compares various images after LSB steganography is applied to determine the effectiveness of spatial frequency as a metric for choosing cover images. In experiment \ref{psnrmetric}, the effectiveness of peak signal-to-noise ratio (PSNR) as a metric is also evaluated.

\section{Effect of Spatial Frequencies on Hiding with LSB in RGB} \label{comparingimages}

\subsection{Introduction}
Images can contain a range of spatial frequencies. High frequency images show fine details, whilst low frequency images consist of smoother transitions between dark and light (See figure \ref{fig:spacefreq}). In this experiment, the effect of LSB on images of varying spatial frequencies is compared, using an online image steganography tool \cite{imagesteg}.

\begin{enumerate}
	\item to determine if spatial frequency is useful as a metric for choosing an effective cover/hidden image combination. \label{spatialeffectivenessaim}
	\item  to determine whether a high, medium, or low frequency image is a better candidate for a cover file.  \label{stegaimcover}
	\item  to determine which combination of high or low frequency cover image and high or low frequency hidden image provides the best concealment. \label{stegaimhidden}

In order to reduce the number of variables in this experiment and simplify masking one image in another, the images used were all cropped and scaled to the size of $640\times396$ pixels. Three images were used that contained either low, medium or high values spatial frequency components. The images were viewed on a 15.6" Matte FHD LED IPS display with a resolution of $1920 \times 1080$. The \textit{Eye of GNOME} application was used to open and display the image files
	 
	 A Matlab\textsuperscript{\textregistered} script was written (\textit{showDCT.m}) that converted the images to grayscale and used Discrete Cosine Transform to show the distribution of spatial frequencies. The images used and their spatial frequencies are shown in figures \ref{fig:highfreq} to \ref{fig:highfreq2}. The DCT plots show the lowest frequencies in the top left and the highest frequencies in the bottom right. 

	 Using the online image steganography tool, each of three images (Figure \ref{fig:highfreq} to \ref{fig:lowfreq}) were combined, using the first, second, and fourth lowest bit planes. The two high frequency images (Figure \ref{fig:highfreq} and Figure \ref{fig:highfreq2}) and the two low frequency images (Figures \ref{fig:lowfreq} and \ref{fig:lowfreq2}) were also merged.
	 
	For aim \ref{spatialeffectivenessaim}, spatial frequency could be deemed useful if there is found to be some correlation between the results and the spatial frequencies of the images. For aim \ref{stegaimcover}, the best cover file would be the one that after hiding have the least visible changes compared to the original. The same metric could be used for aim \ref{stegaimhidden}. The cover image with another hidden would first be compared to the original image, and then to the hidden image. If artefacts can be spotted when compared with the original, then the cover image offers very weak protection, but if it can only be noticed when the hidden image is also shown, then the cover image offers some protection. If neither, then the cover image is very effective.
      
The resuls are shown in the style of a Cayley table, where the horizontal headers correspond to the cover image used, and the vertical headers correspond to the image that was hidden. A score of 1 to 10 is used for each combination, where 1 shows clearly the hidden image, and 10 is indecernible from the original cover image. An asterisk is used where no data was recorded.


For LSB1, the following notes were taken:

	\item Top portion of Sky image gained unnatrual textures when colourful was the hidden image.
	\item Vertical columns in viaduct were faintly visible when hidden under sky image (Figure \ref{fig:skyviaductlsb1}).
For LSB2:

	\item Viaduct image with colourful image hidden showed circle bright spots in sky. Colour transitions became more sudden (posterization).
	\item Viaudct with sky hidden also suffered from posterization
	\item Sky with viaduct and colourful hidden begins to clearly show shapes in hidden images.

And finally for LSB3:

	\item Colourful with viaduct hidden only hints at hidden image in low frequency section (dark wall background).
	\item Colourful image with Galette appears brighter, slight texture in low frequency regions. 
	\item Viaduct with colourful definitely affected by posterization (Figure \ref{fig:viaductcolourlsb4}). Shows some textures from Colourful image in top portion, though rest is fairly unaffected.
The results in regard to the aims of the experiment are:
	\item  Since higher spatial frequencies make artifacts harder to notice in an image, spatial frequency could be useful to determine if an image is effective as a cover image.
	\item  A highly detailed image is best suited to the purpose of cover image. 
	\item  Hiding a low frequency image in a high frequency cover image provides the most concealement

From the results, the colourful high frequency image showed the least distortion when used as a cover image. Only areas of less detail (blocks of solid colour) would show hints of the images underneath. The effectiveness of the less detailed image (sky) as a cover image drops sharply as the number of least significant bits used increases, even when being used to camoflauge an image with similar spatial frequencies. From the results, it appears likely that a "white noise" image like television static would be most effective as a cover image.

The experiment could be improved by using a more standardised scoring method, such as the single stimulus continuous quality evaluation (SSCQE) \cite{imagescore}, as well as using more participants.
Often the peak signal-to-noise ratio (PSNR) is used as a metric of image quality during compression. It can also be used to quantify the difference between two images \cite{psnr}. The higher the value of PSNR for the stego image, the more similar it is to the original cover image, which suggests that humans will not perceive that any image is hidden. PSNR is used for this purpose very often as it is fast to compute and trivial to implement \cite{5586786}. However, using the literal difference between pixels values has been argued to be ineffective, since steganography is most effective when the two images are perceptually similiar rather than similar at the byte level (which PSNR evaluates).  


The aim of this experiment is:
	\item To determine the usefulness of PSNR as metric when choosing a cover image for LSB2 steganography.

A Matlab script (\textit{calcPSNR.m}) was used to calculate the value of PSNR between the luminance channels of two images. The luminance channel was used as this is the aspect of images that the human eye is most sensitive to \cite{Thijssen1971}. This involves converting both images to YCbCr, and calculating the peak signal-to-noise ratio of the luminance (Y) channel of both images using 


where $\textrm{peakval}$ is the max value of the channel ($255$ for an 8-bit luminance channel) and $\textrm{MSE}$ is the mean square error \cite{matlabpsnr}.

Using the same images from experiment 1, the value of PSNR was calculated between the stego image and the cover image. If a low PSNR value corresponds to an ineffective stego image when plotted, this correlation can be confirmed.
      

The results are plotted in figure \ref{fig:psnrplot}. The script \textit{psnrForAllLSB.m} was run for each original image to produce \textit{test.csv}, to which the perceptual scores were then added manually. 

No clear correlation between peak signal-to-noise ratio and the perceptual quality score can be seen. 

The experiment was carried out on very few images, and relies on the result of the previous experiment which already sufferred from few numbers and a non-standardized scoring method. Nonetheless, the results do not seem to suggest any correlation between PSNR and perceptual quality of the stego image, which agrees with experiments \cite{psnrreliab}. Having realised this, most literature on modern steganography favours the use of the structural similarity index (SSIM) as a metric for how similar two images are in terms of human perception \cite{ssim}.

